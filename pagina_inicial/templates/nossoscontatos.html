{% extends 'base.html' %}
{% load static %}

{% block content %}
<section class="bg-white rounded-5 p-4 p-md-5 mb-5 shadow-lg">
    <div class="row g-5">
        <div class="col-lg-5">
            <h1 class="display-5 fw-extrabold mb-4" style="color: #4fa34f;">Vamos conversar?</h1>
            <p class="text-muted mb-5">
                Tem alguma dúvida sobre os nossos selos verdes ou quer saber como certificar sua produção? Nossa equipe está pronta para ajudar.
            </p>

            <div class="d-flex align-items-center mb-4">
                <div class="bg-light p-3 rounded-4 me-3">
                    <img src="{% static 'images/email-icon.png' %}" height="24" alt="Email">
                </div>
                <div>
                    <h6 class="mb-0 fw-bold">E-mail</h6>
                    <span class="text-muted">contato@connecterra.com.br</span>
                </div>
            </div>

            <div class="d-flex align-items-center mb-4">
                <div class="bg-light p-3 rounded-4 me-3">
                    <img src="{% static 'images/local-icon.png' %}" height="24" alt="Localização">
                </div>
                <div>
                    <h6 class="mb-0 fw-bold">Localização</h6>
                    <span class="text-muted">Belém, Pará - Brasil</span>
                </div>
            </div>
        </div>

        <div class="col-lg-7">
            <div class="bg-light p-4 rounded-5">
                <div class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label small fw-bold text-uppercase">Nome</label>
                        <input id="nome" type="text" class="form-control border-0 p-3 rounded-3" placeholder="Seu nome">
                        <div class="invalid-feedback">Por favor, digite seu nome.</div>
                    </div>
                    <div class="col-12">
                        <label class="form-label small fw-bold text-uppercase">Assunto</label>
                        <input id="assunto" type="text" class="form-control border-0 p-3 rounded-3" placeholder="Como podemos ajudar?">
                        <div class="invalid-feedback">O assunto é obrigatório.</div>
                    </div>
                    <div class="col-12">
                        <label class="form-label small fw-bold text-uppercase">Mensagem</label>
                        <textarea id="mensagem" class="form-control border-0 p-3 rounded-3" rows="4" placeholder="Escreva sua mensagem aqui..."></textarea>
                        <div class="invalid-feedback">Escreva uma mensagem antes de enviar.</div>
                    </div>
                    <div class="col-12 text-end">
                        <button type="button" onclick="validarEEnviar()" class="btn btn-custom w-100 py-3">Enviar via E-mail</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>function validarEEnviar() {
    const campos = ['nome', 'assunto', 'mensagem'];
    let formulárioValido = true;

    campos.forEach(id => {
        const campo = document.getElementById(id);
        if (!campo.value.trim()) {
            campo.classList.add('is-invalid'); 
            formulárioValido = false;
        } else {
            campo.classList.remove('is-invalid'); 
        }
    });

    if (formulárioValido) {
        const nome = document.getElementById('nome').value;
        const assunto = document.getElementById('assunto').value;
        const mensagem = document.getElementById('mensagem').value;

        const emailDestino = "contatohenrique97@gmail.com";
        const corpo = `Olá, meu nome é ${nome}.\n\n${mensagem}`;
        
        const mailtoLink = `mailto:${emailDestino}?subject=${encodeURIComponent(assunto)}&body=${encodeURIComponent(corpo)}`;
        window.location.href = mailtoLink;
    }
}
</script>

<style>
.form-control:focus {
        box-shadow: 0 0 0 0.25rem rgba(91, 183, 91, 0.25);
        border: 1px solid #5bb75b;
    }
    
    .form-control.is-invalid {
        border: 2px solid #dc3545 !important;
        background-color: #fff8f8;
    }
    .invalid-feedback {
        font-weight: 600;
        font-size: 0.75rem;
    }
    .fw-extrabold { font-weight: 800; }
    .bg-light { background-color: #f8f9fa !important; }
</style>
{% endblock %}